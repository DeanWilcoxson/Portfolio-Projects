<html>
  <head>
    <style>
    *{padding: 0; margin:0;}
    canvas{ background: #aaa; display: block; margin: 0 auto;}
    </style>
  </head>

  <body>
    <canvas id= "myCanvas" width="392" height="248"></canvas>
    <script>
        var canvas = document.getElementById("myCanvas");
        var context = canvas.getContext("2d");
        document.addEventListener("keydown", keyDownHandler, false);
        document.addEventListener("keyup", keyUpHandler, false);
        var ground = new Image();
        ground.src = "ground.png";
        var water = new Image();
        water.src = "water.png";
        var boat = new Image();
        boat.src = "boat2.png";

        var blueManImg = new Image();
        var blueMan = [
          "blueMan1.png",
          "blueMan2.png",
          "blueMan3.png",
          "blueMan2.png",
          "blueMan1.png",
          "blueMan2.png",
          "blueMan3.png",
          "blueMan2.png",
        ];
        var dudesImg = new Image();
        var dudes = [
          "dudes1.png",
          "dudes2.png",
          "dudes3.png",
          "dudes2.png",
          "dudes1.png",
          "dudes2.png",
          "dudes3.png",
          "dudes2.png",
        ];
        var purpleManImg = new Image();
        var purpleMan = [
          "purpleMan1.png",
          "purpleMan2.png",
          "purpleMan3.png",
          "purpleMan2.png",
          "purpleMan1.png",
          "purpleMan2.png",
          "purpleMan3.png",
          "purpleMan2.png",
        ];
        var manOnRailImg = new Image();
        var manOnRail = [
          "manOnRail1.png",
          "manOnRail2.png",
          "manOnRail3.png",
          "manOnRail2.png",
          "manOnRail1.png",
          "manOnRail2.png",
          "manOnRail3.png",
          "manOnRail2.png",
        ];
        var flagImg = new Image();
        var flag = [
          "flag1.png",
          "flag1.png",
          "flag2.png",
          "flag2.png",
          "flag2.png",
          "flag2.png",
          "flag3.png",
          "flag3.png",
        ];
        var orangeGirlImg = new Image();
        var orangeGirl = [
          "orangeGirl1.png",
          "orangeGirl2.png",
          "orangeGirl3.png",
          "orangeGirl2.png",
          "orangeGirl1.png",
          "orangeGirl2.png",
          "orangeGirl3.png",
          "orangeGirl2.png",
        ];
        var greenManImg = new Image();
        var greenMan = [
          "greenMan1.png",
          "greenMan2.png",
          "greenMan1.png",
          "greenMan2.png",
        ];


        var frameCounter = 0;
        var frame = 0;
        var frameDelta = 1;
        var bobHeightArr = [2, 4, 6, 4, 2, 4, 6, 4, 2];
        var boatDistanceFromCenter =
          distanceFromCenter + ((100 + distanceFromCenter) / 2) * 20;
        var leftPressed = false;
        var rightPressed = false;
        var distanceFromCenter = 0;
        function keyDownHandler(e)
        {
          if(e.keyCode == 37)
          {
            leftPressed = true;
          }
          else if(e.keyCode == 39)
          {
            rightPressed = true;
          }
        }

        function keyUpHandler(e)
        {
          if(e.keyCode == 37)
          {
            leftPressed = false;
          }
          else if(e.keyCode == 39)
          {
            rightPressed = false;
          }
        }
        function controls() {
          if (leftPressed) {
            if (distanceFromCenter - 1 > -127) {
              distanceFromCenter--;
            }
          }
          if (rightPressed) {
            if (distanceFromCenter + 1 < 128) {
              distanceFromCenter++;
            }
          }
        }
        function drawEnvironment() {
          context.drawImage(
            water,
            184 + distanceFromCenter,
            0,
            392,
            196,
            0,
            0,
            392,
            196
          );
          context.drawImage(
            boat,
            130 + distanceFromCenter,
            5,
            392,
            181,
            0,
            0,
            392,
            200
          );
          context.drawImage(
            ground,
            260 + distanceFromCenter,
            0,
            392,
            72,
            0,
            176,
            392,
            72
          );

          if (frameCounter % 20 == 0) {
            frame += frameDelta;
            if (frame == 8 || frame == 0) {
              frameDelta *= -1;
            }
          }

          flagImg.src = flag[frame];
          context.drawImage(flagImg, 376 - distanceFromCenter, 20);

          orangeGirlImg.src = orangeGirl[frame];
          context.drawImage(orangeGirl, 61 - boatDistanceFromCenter, 109, 32, 61);

          frameCounter++;
        }
        gameLoop = () => {
          drawEnvironment();
          controls();
        };

        setInterval(gameLoop, 10);

    </script>
  </body>
</html>